<table class="table table-bordered table-striped">
  <thead>
    <tr>
      <th><%= Stage.human_attribute_name(:position) %></th>
      <th><%= Stage.human_attribute_name(:grade) %></th>
      <th><%= Stage.human_attribute_name(:name) %></th>
      <th><%= Stage.human_attribute_name(:description) %></th>
      <th><%= Stage.human_attribute_name(:price) %></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <% stages.each do |stage| %>
      <tr>
        <td><%= stage.position||"" %></td>
        <td>
          <% if stage.grade %>
            <%= link_to stage.grade.name, admin_grade_path(stage.grade) %>
          <% end -%>
        </td>
        <td><%= stage.name %></td>
        <td><%= stage.description %></td>
        <td><%= stage.price %></td>
        <td class="control span2">
          <% if can? :manage, Stage %>
            <%= link_to t("show", scope: "crud"), admin_stage_path(stage) %>
            <%= link_to t("edit", scope: "crud"), edit_admin_stage_path(stage) %>
            <%= link_to t("ranking",scope: "ranking_type"), ranking_admin_ranks_path(stage_id: stage.id) %>
            <div class="btn-group">
              <% if stage.first? %>
                <%= link_to t("move_higher", scope: "crud"), '#', class: 'btn disabled' %>
              <% else %>
                <%= link_to t("move_higher", scope: "crud"), move_higher_admin_stage_path(stage), method: :post, class: 'btn' %>
              <% end -%>

              <% if stage.last? %>
                <%= link_to t("move_lower", scope: "crud"), '#', class: 'btn disabled' %>
              <% else %>
                <%= link_to t("move_lower", scope: "crud"), move_lower_admin_stage_path(stage), method: :post, class: 'btn' %>
              <% end -%>
            <% end -%>
          </div>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
